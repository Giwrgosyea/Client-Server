# Client-Server

Client: Αρχικα γινεται η συνδεση μεταξυ τους 1ο ορισμα η IP και δευτερο τον φακελο που ζητας προσοχη στην τοποθετηση του link αν ειναι στον φακελο του Server ζηταμε ετσι p.x. home  ο client ειναι υποχρεωμενος να διαβαζει μπιτ-μπιτ μεχρι να τελειωσει το αρχειο και ανα μπλοκ.ακομη ειναι υπευθυνος να κανει filecopy εκει παιρνει το λινκ του αρχειου το οποιο εχει παρει απο τον σερβερ και φτιαχνει τους αναλογους φακελους επισης παιρνει και το stat που του το εχει στειλει ο σερβερ.Ενω κλεινει οταν παρει ολα τα πακετα απο τον σερβερ.


Server:αρχικα οριζουμε μια pool που εχει μεσα ολα τα working thread ενω εχουμε και ενα ακομη στο οποιο εχουμε μεσα μια δομη savefile η οποια εχει μεσα char* δηλαδη του φουλ λινκ που βρηκε απο την αναδρομικη αναζητηση του φακελου πηρε απο τον client και το fd που πηρε οταν εγινε η συνδεση με τον client οποτε οταν θα θελει να στειλει πισω στον client να εχει το fd του και να στειλει επισης εκει που αναφερα για την αναδρομικη αναζητηση (search_file) υπαρχει η count_file η οποια λειτουργει με την ιδια λογικη την search_file με την μονη διαφορα μετραει ποσα αρχεια βρηκαμε συνολικα βοηθοντας μας στο κλεισιμο αργοτερα του σοκετ.τωρα για το pool που ειπαμε πιο πριν εχει διαφορες συναρτησεις με σημαντικοτερες την obtain και την place οπου ο παραγωγος τοποθετει μεσω σηματο pthread λεει οτι εβαλε κατι οποτε ο producer που ηταν αρχικα κολλημενος παει και περνει απο εκει εν συνεχεια διαβαζει το char* ψανχει βρησκει τα δεδομενα του και στα στελνει.Εχω χρησιμοποιησει 2 διαφορετικα mtxs.το ενα για το producer-consumer και το αλλο για την αποστολη στον client για να μην πανε ολα τα thread να στειλουν στον client.Την αποστολη στον client την αναλαμβανουν τα working threads,ενω την αναζητηση το search threads,oταν κλεισει η συνδεση γινονται τα αναλογα destroy καθως και ο server κλεινει με singal ! :) 
O client υποστηριζει καθε ειδους αρχειο και τρεχει απο την γραμμη οπως ζητατε.και στελνεις byte-byte οσο ειναι το αρχειο και δεχεται αναλογως και ο client!


Ο κωδικας μου εχει επηρεαστει πολυ απο τα παραδειγματα που υπαρχουν στις σημειωσεις κυριως απο τα σοκετς καθως και απο τα παραδειγματα producer-consumer,η αναζητηση επισης εχει επηρεαστει σε ενα παραδειγμα που βρηκα στον stackoverflow.
